<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Dashboard</title>
        
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="{{url_for('dashboard')}}">Welcome</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="{{url_for('guide')}}">Guide</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{url_for('map')}}">Map</a></li>
                        {% if session.get('is_moderator') %}
                        <li class="nav-item"><a class="nav-link" href="{{url_for('approveStory')}}">Approve Story</a></li>
                        {% endif %}
                        {% if session.get('user_id') %}
                        <li class="nav-item"><a class="nav-link" href="{{url_for('addingStory')}}">Add Story</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{url_for('logout')}}">Logout</a></li>
                        {% else %}
                        <li class="nav-item"><a class="nav-link" href="{{url_for('login')}}">login/signup</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
                <div class="d-flex justify-content-center">
                    <div class="text-center">
                        <h1 class="mx-auto my-0 text-uppercase">Dastaan</h1>
                        <h2 class="text-white-50 mx-auto mt-2 mb-5">Digital Museum for Karachi</h2>
                        <a class="btn btn-primary" href="{{url_for('login')}}">Get Started</a>
                    </div>
                </div>
            </div>
        </header>
        <!-- About-->
        <section class="about-section text-center" >
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="text-white mb-4">What can you do?</h2>
                        <p class="text-white-50">
                            Create your own personal museum of what life was like. 
                        </p>
                    </div>
                </div>
                <img class="img-fluid" src="{{url_for('static', filename='images/imagepp.jpg')}}" alt="..." />
            </div>
        </section>
        <!-- Projects-->
        <section class="projects-section bg-light" >
            <div class="container px-4 px-lg-5">
                <!-- Featured Project Row-->
                <div class="row gx-0 mb-4 mb-lg-5 align-items-center">
                    <div class="carousel" data-carousel>
                        <button class="carousel-button prev" data-carousel-button="prev">&#8656;</button>
                        <button class="carousel-button next" data-carousel-button="next">&#8658;</button>
                        <ul data-slides>
                           
                              {% for image in images %}
                              <li class="slide" data-active>
                              <img class="img-fluid mb-3 mb-lg-0" src="{{ url_for('get_image', filename=image['file_name']) }}" alt="Nature Image #1">
                            </li> 
                              {% endfor %}
                          
                        </ul>
                      </div>
                    <div class="col-xl-4 col-lg-5">
                        <div class="featured-text text-center text-lg-left">
                            <h4>Most Visited</h4>
                            <p class="text-black-50 mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc volutpat, magna sit amet sollicitudin lobortis, erat risus ullamcorper lectus, fringilla molestie turpis elit in magna. Nulla ultricies eleifend feugiat. Nullam vitae nisi at velit rhoncus sollicitudin vel ac orci. Vivamus elementum nulla dolor, et dapibus nisl tristique quis. Nullam in lectus ornare lacus placerat volutpat. Maecenas et feugiat metus, non ultricies magna.</p>
                        </div>
                    </div>
                </div>
                <!-- Project One Row-->
                <div class="row gx-0 mb-5 mb-lg-0 justify-content-center">
                    <div class="col-lg-6"><img class="img-fluid" src="{{ url_for('get_image', filename=latestStory['file_name']) }}" alt="image" /></div>
                    <div class="col-lg-6">
                        <div class="bg-black text-center h-100 project">
                            <div class="d-flex h-100">
                                <div class="project-text w-100 my-auto text-center text-lg-left">
                                    <h4 class="text-white">Recently Added</h4>
                                    <p class="mb-0 text-white-50">{{latestStory['description'][:600]}}
                                    <br> 
                                    <a href="{{ url_for('getlocations', story_id=latestStory['id'], flag=0) }}" >View Full Story</a>

                                    </p>
                                    <hr class="d-none d-lg-block mb-0 ms-0" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Project Two Row-->
                <div class="row gx-0 justify-content-center">
                    <div class="col-lg-6"><img class="img-fluid" src="{{url_for('get_image', filename=historicStory['file_name'])}}" alt="..." /></div>
                    <div class="col-lg-6 order-lg-first">
                        <div class="bg-black text-center h-100 project">
                            <div class="d-flex h-100">
                                <div class="project-text w-100 my-auto text-center text-lg-right">
                                    <h4 class="text-white">Historically Significant</h4>
                                    <p class="mb-0 text-white-50">{{historicStory['description'][:600]}}
                                        <br> 
                                        <a href="{{ url_for('getlocations', story_id=historicStory['id'], flag=0) }}" >View Full Story</a>
    
                                        </p>
                                    <hr class="d-none d-lg-block mb-0 me-0" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
       <!-- Signup-->
       <section class="signup-section" >
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5">
                <div class="col-md-10 col-lg-8 mx-auto text-center">
                    <i class="far fa-paper-plane fa-2x mb-2 text-white"></i>
                    <h2 class="text-white mb-5">Search for places you want to know!</h2>
                    <!-- * * * * * * * * * * * * * * *-->
                    <!-- * * SB Forms Contact Form * *-->
                    <!-- * * * * * * * * * * * * * * *-->
                    <!-- This form is pre-integrated with SB Forms.-->
                    <!-- To make this form functional, sign up at-->
                    <!-- https://startbootstrap.com/solution/contact-forms-->
                    <!-- to get an API token!-->
                    <form class="form-inline" name = "searchlocations" action="/" method = "POST" data-sb-form-api-token="API_TOKEN">
                        <!-- Email address input-->
                        <div class="row input-group-newsletter">
                            <div class="col"><input class="form-control" name = "location_name" id="location_name" type="text" placeholder="Enter location..." aria-label="Enter location..." autocomplete="off" /></div>
                            <div class="col-auto"><button class="btn btn-primary " id="submitButton" type="submit">Search</button></div>
                        </div>
                    
                        
                    </form>
                    
                        
                    
                   
                </div>
            </div>
        </div>
        
   
    
        <!-- Footer-->
        <!-- <footer class="footer bg-black small text-center text-white-50"><div class="container px-4 px-lg-5">Copyright &copy; Your Website 2022</div></footer> -->
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        
        
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- jQuery UI CSS -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

        <!-- jQuery and jQuery UI JavaScript -->
        <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="//code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
        
        <script>
            $(function() {
                $("#location_name").autocomplete({
                    source: function(request, response) {
                    $.ajax({
                        url: "/autocomplete",
                        data: { term: request.term },
                        success: function(data) {
                        response(data[0]);
                        }
                    });
                    },
                    select: function(event, ui) {
                        event.preventDefault();
                        $("#location_name").val(ui.item.label);
                    }
                });
            });

        </script>
        <script>
            const buttons = document.querySelectorAll("[data-carousel-button]")

buttons.forEach(button => {
  button.addEventListener("click", () => {
    const offset = button.dataset.carouselButton === "next" ? 1 : -1
    const slides = button
      .closest("[data-carousel]")
      .querySelector("[data-slides]")

    const activeSlide = slides.querySelector("[data-active]")
    let newIndex = [...slides.children].indexOf(activeSlide) + offset
    if (newIndex < 0) newIndex = slides.children.length - 1
    if (newIndex >= slides.children.length) newIndex = 0

    slides.children[newIndex].dataset.active = true
    delete activeSlide.dataset.active
  })
})
        </script>
    </body>
    <script type="text/javascript" src="../static/js/script.js"></script>
</html>
